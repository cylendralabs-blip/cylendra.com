# Phase 3 - Hotfix: Strategy Selector Issue

## ๐ ุงููุดููุฉ

ุนูุฏ ุฅูุดุงุก ุงุณุชุฑุงุชูุฌูุฉ ุฌุฏูุฏุฉุ ูุง ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุจูุช.

### ุงูุฃุนุฑุงุถ:
- โ ุงูุงุณุชุฑุงุชูุฌูุฉ ุชููุดุฃ ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุง ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ "ุงุฎุชุฑ ุงุณุชุฑุงุชูุฌูุฉ"
- โ ุงููุงุฆูุฉ ุชุจูู ูุงุฑุบุฉ ุฃู ูุนุทูุฉ

---

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

### ุงููุดููุฉ 1: ููุชุฑุฉ ุฎุงุทุฆุฉ ูู Selector
**ุงูููู:** `src/components/bot-settings/StrategyInstanceSelector.tsx`

**ุงูููุฏ ุงููุฏูู:**
```typescript
const activeInstances = instances?.filter(i => i.status === 'active') || [];
```

**ุงููุดููุฉ:**
- ุงูู Selector ูุงู ูุนุฑุถ ููุท ุงูุงุณุชุฑุงุชูุฌูุงุช ุจุญุงูุฉ `'active'`
- ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุฌุฏูุฏุฉ ูุงูุช ุชูุญูุธ ุจุญุงูุฉ `'draft'`
- ูุฐูู ูู ุชุธูุฑ ูู ุงููุงุฆูุฉ

### ุงููุดููุฉ 2: Status ุงูุชุฑุงุถู ุฎุงุทุฆ
**ุงูููู:** `src/components/strategy-system/CreateStrategyDialog.tsx`

**ุงูููุฏ ุงููุฏูู:**
```typescript
await createMutation.mutateAsync({
  template_id: template.id,
  ...values,
  // ูุง ูุชู ุชูุฑูุฑ status ุตุฑุงุญุฉู
});
```

**ุงููุดููุฉ:**
- ุนูุฏ ุฅูุดุงุก ุงุณุชุฑุงุชูุฌูุฉ ุฌุฏูุฏุฉุ ูู ูุชู ุชุญุฏูุฏ `status` ุตุฑุงุญุฉู
- ูู ุจุนุถ ุงูุญุงูุงุชุ ูุงูุช ุชูุญูุธ ุจุญุงูุฉ `'draft'` ุจุฏูุงู ูู `'active'`

---

## โ ุงูุญู

### ุงูุฅุตูุงุญ 1: ุชุญุฏูุซ ููุชุฑุฉ Selector

**ุงูููู:** `src/components/bot-settings/StrategyInstanceSelector.tsx`

**ุงูููุฏ ุงูุฌุฏูุฏ:**
```typescript
// Show both 'active' and 'draft' strategies (exclude only 'archived')
const activeInstances = instances?.filter(i => i.status !== 'archived') || [];
```

**ุงูููุงุฆุฏ:**
- โ ูุนุฑุถ ุงูุงุณุชุฑุงุชูุฌูุงุช ุจุญุงูุฉ `'active'` ู `'draft'`
- โ ูุฎูู ููุท ุงูุงุณุชุฑุงุชูุฌูุงุช ุงููุคุฑุดูุฉ (`'archived'`)
- โ ูุณูุญ ูููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ุงูุงุณุชุฑุงุชูุฌูุงุช ููุฏ ุงูุชุทููุฑ

### ุงูุฅุตูุงุญ 2: ุฅุถุงูุฉ Badge ูููุณูุฏุงุช

**ุงูููู:** `src/components/bot-settings/StrategyInstanceSelector.tsx`

**ุงูููุฏ ุงูุฌุฏูุฏ:**
```typescript
{instance.status === 'draft' && (
  <Badge variant="secondary" className="text-xs bg-yellow-500/20 text-yellow-700 dark:text-yellow-300">
    ูุณูุฏุฉ
  </Badge>
)}
```

**ุงูููุงุฆุฏ:**
- โ ููุถุญ ูููุณุชุฎุฏู ุฃู ุงูุงุณุชุฑุงุชูุฌูุฉ ูุง ุชุฒุงู ูุณูุฏุฉ
- โ ูุณุงุนุฏ ูู ุงูุชูููุฒ ุจูู ุงูุงุณุชุฑุงุชูุฌูุงุช ุงููุดุทุฉ ูุงููุณูุฏุงุช

### ุงูุฅุตูุงุญ 3: ุชุญุฏูุฏ Status ุตุฑุงุญุฉู ุนูุฏ ุงูุฅูุดุงุก

**ุงูููู:** `src/components/strategy-system/CreateStrategyDialog.tsx`

**ุงูููุฏ ุงูุฌุฏูุฏ:**
```typescript
// Create new strategy instance with 'active' status
await createMutation.mutateAsync({
  template_id: template.id,
  ...values,
  status: 'active', // Explicitly set status to 'active' for new strategies
});
```

**ุงูููุงุฆุฏ:**
- โ ูุถูู ุฃู ุฌููุน ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุฌุฏูุฏุฉ ุชููุดุฃ ุจุญุงูุฉ `'active'`
- โ ูุง ุญุงุฌุฉ ููุงุนุชูุงุฏ ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู Service

### ุงูุฅุตูุงุญ 4: ุชุญุฏูุซ ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูููุฌูุฏุฉ

**SQL Query:**
```sql
UPDATE strategy_instances 
SET status = 'active' 
WHERE status = 'draft';
```

**ุงูููุงุฆุฏ:**
- โ ูุตูุญ ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูููุฌูุฏุฉ ุงูุชู ูุงูุช ุจุญุงูุฉ `'draft'`
- โ ูุฌุนููุง ุชุธูุฑ ููุฑุงู ูู ุงููุงุฆูุฉ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. โ `src/components/bot-settings/StrategyInstanceSelector.tsx`
   - ุชุบููุฑ ุงูููุชุฑุฉ ูู `status === 'active'` ุฅูู `status !== 'archived'`
   - ุฅุถุงูุฉ Badge ูููุณูุฏุงุช

2. โ `src/components/strategy-system/CreateStrategyDialog.tsx`
   - ุฅุถุงูุฉ `status: 'active'` ุตุฑุงุญุฉู ุนูุฏ ุฅูุดุงุก ุงุณุชุฑุงุชูุฌูุฉ ุฌุฏูุฏุฉ

3. โ ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชุญุฏูุซ ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูููุฌูุฏุฉ ูู `'draft'` ุฅูู `'active'`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุงุช:

1. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ:**
   ```
   http://localhost:5173/dashboard/bot-settings
   ```

2. **ุงุฐูุจ ุฅูู ุชุจููุจ "ุงูุงุณุชุฑุงุชูุฌูุฉ"**

3. **ุงูุชุญ ุงููุงุฆูุฉ ุงูููุณุฏูุฉ "ุงุฎุชุฑ ุงุณุชุฑุงุชูุฌูุฉ"**

4. **โ ุงููุชููุน:**
   - ุชุธูุฑ ุงูุงุณุชุฑุงุชูุฌูุฉ "DCA For BTC (ูุณุฎุฉ)"
   - ูุธูุฑ ุจุฌุงูุจูุง: `v1` ู `DCA ุงูุฃุณุงุณูุฉ`
   - ุงููุงุฆูุฉ ููุณุช ูุงุฑุบุฉ

5. **ุงุฎุชุฑ ุงูุงุณุชุฑุงุชูุฌูุฉ ูุงุญูุธ**

6. **โ ุงููุชููุน:**
   - ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ"

---

## โ ุงููุชูุฌุฉ

- โ **ุงูุงุณุชุฑุงุชูุฌูุงุช ุชุธูุฑ ูู ุงููุงุฆูุฉ**
- โ **ูููู ุงุฎุชูุงุฑ ุงูุงุณุชุฑุงุชูุฌูุฉ ูุญูุธูุง**
- โ **ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุฌุฏูุฏุฉ ุชููุดุฃ ุจุญุงูุฉ 'active' ุชููุงุฆูุงู**
- โ **ุงููุณูุฏุงุช ุชุธูุฑ ูุน badge ุชูุถูุญู**

---

**ุชู ุญู ุงููุดููุฉ! ๐**

